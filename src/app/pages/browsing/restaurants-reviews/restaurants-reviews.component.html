<div id="restaurantDiv" class="container-lg">
    <div class="row">
        <div class="d-flex justify-content-center" *ngIf="!reviewsLoaded">
            <div class="spinner-border"></div>
        </div>
        <div class="flex-column">
            <div>
                <h2>{{restaurant.restaurantName}}</h2>
                <p>Owned By: {{restaurant.ownerName}}</p>
                <p>{{restaurant.address}} {{restaurant.city}}, {{restaurant.state}} {{restaurant.zipCpde}}</p>
            </div>
        </div>
        <div class="d-flex justify-content-center bg-dark">
            <img src="https://mortonfoodservice.com/content/uploads/restaurant-patio-morton.png" alt="default restaurant image" style="max-width: 500px; height: 50vh"/>
            <!-- <p>Restaurant Image goes here</p> -->
        </div>
        <div>
            <div>&nbsp;</div>
        </div>
        <div class="flex-column">
            <h4>Reviews ({{restaurant.restaurantReviews.length}})</h4>
            <div class="reviewCard" *ngFor="let review of restaurant.restaurantReviews" reviewData="review">
                <div>
                    <div>
                        <ngb-rating [max]="5" [(rate)]="review.reviewRating" [readonly]="true"></ngb-rating>
                        <h5>User : {{review.user.userName}}</h5>
                        <!-- <h5>User Id : {{review.user.userId}}</h5> -->
                        <h5>{{review.reviewTitle}}</h5>
                        <h6>{{review.reviewText}}</h6>
                        <p>Reviewed On : {{review.reviewDate | date}}</p>
                        <button class="btn btn-primary m-2 mb-3" (click)="editReview(review)">Edit Review</button>
                        <button class="btn btn-primary m-2 mb-3" (click)="deleteReview(review)">Delete Review</button>
                    </div>
                    <div *ngIf="updateSuccessful">
                        <div>{{updateMessage}}</div>
                    </div>
                    <div *ngIf="deleteSuccessful">
                        <div>{{deleteMessage}}</div>
                    </div>
                </div>
                <div *ngIf="editing && editReviewId==review.reviewId">
                    <p>Rating:</p>
                    <input type="number" placeholder="{{review.reviewRating}}" id="rating" name="rating" min="1" max="5" [(ngModel)]="editRating"/>
                    <p>Text: </p>
                    <textarea id="reviewText" placeholder="{{review.reviewText}}" id="reviewText" name="reviewText" [(ngModel)]="editReviewText"></textarea>
                    <button class="btn btn-primary m-2 mb-3" (click)="sendEdit()">Send Edit</button>
                    <button class="btn btn-primary m-2 mb-3" (click)="cancelEditReview()">Cancel Edit</button>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex flex-wrap align-content-center justify-content-center" *ngIf="adding">
        <div>
            <div>
                <p>Rate Review</p>
                <select name="rating" id="rating" [(ngModel)]="rating">
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                </select>
            </div>
            <input type="text" id="reviewTitle" name="reviewTitle" [(ngModel)] = "reviewTitle" placeholder="Review Title"/>
            <br/>
            <textarea id="reviewText" name="reviewText" [(ngModel)] = "reviewText" placeholder="Enter review here"></textarea>
        </div>
    </div>

    <!-- <div *ngIf="!adding && sessionActive"> -->
    <div *ngIf="!adding">
        <button class="btn btn-primary m-2 mb-3" (click)="addReview()">Add Review</button>
    </div>
    <div *ngIf="adding">
        <button class="btn btn-primary m-2 mb-3" (click)="sendAddReview()">Send Review</button>
        <button class="btn btn-primary m-2 mb-3" (click)="cancelAddReview()">Cancel Review</button>
    </div>
</div>
